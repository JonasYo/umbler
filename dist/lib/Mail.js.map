{"version":3,"sources":["../../src/lib/Mail.js"],"names":["Mail","service","mailConfig","auth","transporter","nodemailer","createTransport","template","handlebarOptions","viewEngine","extName","partialsDir","layoutsDir","defaultLayout","viewPath","use","mailOptions","configureTemplates","sendMail"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AAEA;;;;;;;;IAEMA,I;AACJ,kBAAc;AAAA;;AAAA,QACJC,OADI,GACcC,cADd,CACJD,OADI;AAAA,QACKE,IADL,GACcD,cADd,CACKC,IADL;;;AAGZ,SAAKC,WAAL,GAAmBC,qBAAWC,eAAX,CAA2B;AAC5CL,sBAD4C;AAE5CE;AAF4C,KAA3B,CAAnB;AAID;;;;uCAEkBI,Q,EAAU;AAC3B,UAAMC,mBAAmB;AACvBC,oBAAY;AACVC,mBAAS,MADC;AAEVC,uBAAa,6BAFH;AAGVC,sBAAY,6BAHF;AAIVC,yBAAkBN,QAAlB;AAJU,SADW;AAOvBO,kBAAU,6BAPa;AAQvBJ,iBAAS;AARc,OAAzB;AAUA,WAAKN,WAAL,CAAiBW,GAAjB,CAAqB,SAArB,EAAgC,2CAAIP,gBAAJ,CAAhC;AACD;;;6BAEQQ,W,EAAa;AACpB,WAAKC,kBAAL,CAAwBD,YAAYT,QAApC;AACA,aAAO,KAAKH,WAAL,CAAiBc,QAAjB,CAA0BF,WAA1B,CAAP;AACD;;;;;;kBAGY,IAAIhB,IAAJ,E","file":"Mail.js","sourcesContent":["import nodemailer from 'nodemailer';\r\nimport hbs from 'nodemailer-express-handlebars';\r\n\r\nimport mailConfig from '../config/mail';\r\n\r\nclass Mail {\r\n  constructor() {\r\n    const { service, auth } = mailConfig;\r\n\r\n    this.transporter = nodemailer.createTransport({\r\n      service,\r\n      auth,\r\n    });\r\n  }\r\n\r\n  configureTemplates(template) {\r\n    const handlebarOptions = {\r\n      viewEngine: {\r\n        extName: '.hbs',\r\n        partialsDir: 'src/resources/views/emails/',\r\n        layoutsDir: 'src/resources/views/emails/',\r\n        defaultLayout: `${template}.hbs`,\r\n      },\r\n      viewPath: 'src/resources/views/emails/',\r\n      extName: '.hbs',\r\n    };\r\n    this.transporter.use('compile', hbs(handlebarOptions));\r\n  }\r\n\r\n  sendMail(mailOptions) {\r\n    this.configureTemplates(mailOptions.template);\r\n    return this.transporter.sendMail(mailOptions);\r\n  }\r\n}\r\n\r\nexport default new Mail();\r\n"]}