{"version":3,"sources":["../../../../src/app/middlewares/user/validateUpdateFields.js"],"names":["Yup","req","res","next","schema","object","shape","name","string","email","password","min","passwordConfirmation","when","field","required","oneOf","ref","oldPassword","isValid","body","status","json","message","code"],"mappings":";;;;;;AAAA;;IAAYA,G;;;;;;;qEAEG,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACPC,kBADO,GACEJ,IAAIK,MAAJ,GAAaC,KAAb,CAAmB;AAChCC,oBAAMP,IAAIQ,MAAJ,EAD0B;AAEhCC,qBAAOT,IAAIQ,MAAJ,GAAaC,KAAb,EAFyB;AAGhCC,wBAAUV,IAAIQ,MAAJ,GAAaG,GAAb,CAAiB,CAAjB,CAHsB;AAIhCC,oCAAsBZ,IAAIQ,MAAJ,GAAaK,IAAb,CAAkB,UAAlB,EAA8B,UAACH,QAAD,EAAWI,KAAX;AAAA,uBAClDJ,WAAWI,MAAMC,QAAN,GAAiBC,KAAjB,CAAuB,CAAChB,IAAIiB,GAAJ,CAAQ,UAAR,CAAD,CAAvB,CAAX,GAA2DH,KADT;AAAA,eAA9B,CAJU;AAOhCI,2BAAalB,IAAIQ,MAAJ,GAAaK,IAAb,CAAkB,UAAlB,EAA8B,UAACH,QAAD,EAAWI,KAAX;AAAA,uBACzCJ,WAAWI,MAAMC,QAAN,EAAX,GAA8BD,KADW;AAAA,eAA9B;AAPmB,aAAnB,CADF;AAAA;AAAA,mBAaDV,OAAOe,OAAP,CAAelB,IAAImB,IAAnB,CAbC;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,6CAcJlB,IAAImB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BC,uBACE,uEAFwB;AAG1BC,oBAAM;AAHoB,aAArB,CAdI;;AAAA;AAAA,6CAqBNrB,MArBM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","file":"validateUpdateFields.js","sourcesContent":["import * as Yup from 'yup';\r\n\r\nexport default async (req, res, next) => {\r\n  const schema = Yup.object().shape({\r\n    name: Yup.string(),\r\n    email: Yup.string().email(),\r\n    password: Yup.string().min(6),\r\n    passwordConfirmation: Yup.string().when('password', (password, field) =>\r\n      password ? field.required().oneOf([Yup.ref('password')]) : field\r\n    ),\r\n    oldPassword: Yup.string().when('password', (password, field) =>\r\n      password ? field.required() : field\r\n    ),\r\n  });\r\n\r\n  if (!(await schema.isValid(req.body))) {\r\n    return res.status(400).json({\r\n      message:\r\n        'Parece que você não forneceu todos os dados necessários corretamente.',\r\n      code: 'ERROR_BAD_REQUEST',\r\n    });\r\n  }\r\n\r\n  return next();\r\n};\r\n"]}